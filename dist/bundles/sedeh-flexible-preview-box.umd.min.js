!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@sedeh/into-pipes")):"function"==typeof define&&define.amd?define("@sedeh/flexible-preview-box",["exports","@angular/core","@angular/common","@sedeh/into-pipes"],t):t((e.sedeh=e.sedeh||{},e.sedeh["flexible-preview-box"]={}),e.ng.core,e.ng.common,e["into-pipes"])}(this,function(e,t,o,r){"use strict";var n=function(){function e(){this.aboveData=[],this.belowData=[],this.onselect=new t.EventEmitter}return e.prototype.ngOnInit=function(){var t=this;this.metadata&&this.metadata.map(function(e){"above"===e.position?t.aboveData.push(e):"below"===e.position&&t.belowData.push(e)})},e.prototype.ngOnChanges=function(e){},e.prototype.itemValue=function(e,t){var o=e;return t.map(function(e){o&&(o=o[e])}),o===undefined||null===o||"null"===o?"":String(o)},e.prototype.rowContent=function(e){var t=this.itemValue(this.item,e.key.split("."));return t!==undefined&&null!=t?t:""},e.prototype.hoverOver=function(e){this.largeImage&&this.effects.zoomOnHover&&e.target.nodeName},e.prototype.hoverOut=function(e){this.largeImage&&(this.largeImage.nativeElement.style.opacity=0,this.largeImage.nativeElement.style.top="-10000px",this.largeImage.nativeElement.style.left="-10000px")},e.prototype.hoverViewPort=function(e){this.largeImage&&this.effects.zoomOnHover&&(this.largeImage.nativeElement.style.opacity=1,this.largeImage.nativeElement.style.top=-e.layerY+"px",this.largeImage.nativeElement.style.left=-e.layerX+"px")},e.prototype.keyup=function(e){13===e.which&&e.target.click()},e.prototype.selectItem=function(e){this.onselect.emit({item:this.item,selected:!0,action:"redirect"})},e.prototype.videoPlayed=function(e){},e.prototype.videoPaused=function(e){},e.prototype.videoEnded=function(e){},e.prototype.onComponentChange=function(e){this.onselect.emit(e)},e.decorators=[{type:t.Component,args:[{selector:"flexible-preview-box",template:'<div class="above-viewport" [style.max-width]="effects.width ? (effects.width + \'px\') : \'auto\'">\r\n    <div *ngFor="let row of aboveData; let i = index" \r\n        class="box-row"\r\n        [style.margin-top]="row.spacing ? (row.spacing + \'px\') : \'0\'"\r\n        [class.left]="row.side === \'left\'"\r\n        [class.right]="row.side === \'right\'"\r\n        [class.center]="row.side === \'center\'"\r\n        [class.emphasize]="row.emphasize"\r\n        [class.side-by-side]="row.sidebyside">\r\n        <span class="label" [class.off-screen]="row.hidelabel" [textContent]="row.value"></span>\r\n        <span class="value" [intoName]="row.value"\r\n            [intoId]="row.key + \'-\' + i"\r\n            [into]="row.format"\r\n            [intoData]="item"\r\n            [rawContent]="rowContent(row)"\r\n            [onComponentChange]="onComponentChange.bind(this)"></span>\r\n    </div>\r\n    <div class="clearblock"></div>\r\n</div>\r\n<div \r\n    class="viewport" \r\n    tabindex="0"\r\n    [title]="item.name"\r\n    [style.width]="effects.width + \'px\'" \r\n    [style.height]="effects.height + \'px\'"\r\n    (keyup)="keyup($event)"\r\n    (click)="selectItem($event)"\r\n    (mouseout)="hoverOut($event)"\r\n    (mouseover)="hoverOver($event)"\r\n    (mousemove)="hoverViewPort($event)">\r\n    <img  class="content" \r\n            [src]="viewport.src.small" \r\n            *ngIf="viewport.type === \'image\'" />\r\n    <img  class="hover" #largeImage\r\n            [style.width]="(effects.width*2) + \'px\'"\r\n            [style.height]="(effects.height*2) + \'px\'"\r\n            [src]="viewport.src.large" \r\n            *ngIf="effects.zoomOnHover" />\r\n    <video  \r\n        class="content" #video\r\n        [style.width]="effects.width + \'px\'" \r\n        [style.height]="effects.height + \'px\'"\r\n        (play)="videoPlayed(video.currentTime)"\r\n        (pause)="videoPaused(video.currentTime)"\r\n        (ended)="videoEnded(video.currentTime)"\r\n        *ngIf="viewport.type === \'video\'" controls>\r\n        <source [src]="viewport.src.mp4" type="video/mp4">\r\n        <source [src]="viewport.src.webm" type="video/webm">\r\n        <source [src]="viewport.src.egg" type="video/ogg">\r\n    </video>\r\n</div>\r\n<div class="below-viewport" [style.max-width]="effects.width ? (effects.width + \'px\') : \'auto\'">\r\n    <div *ngFor="let row of belowData; let i = index" \r\n        class="box-row"\r\n        [style.margin-top]="row.spacing ? (row.spacing + \'px\') : \'0\'"\r\n        [class.left]="row.side === \'left\'"\r\n        [class.right]="row.side === \'right\'"\r\n        [class.center]="row.side === \'center\'"\r\n        [class.emphasize]="row.emphasize"\r\n        [class.side-by-side]="row.sidebyside">\r\n        <span class="label" [class.off-screen]="row.hidelabel" [textContent]="row.value"></span>\r\n        <span class="value" [intoName]="row.value"\r\n            [intoId]="row.key + \'-\' + i"\r\n            [into]="row.format"\r\n            [intoData]="item"\r\n            [rawContent]="rowContent(row)"\r\n            [onComponentChange]="onComponentChange.bind(this)"></span>\r\n    </div>\r\n    <div class="clearblock"></div>\r\n</div>',styles:[":host{background-color:#fff;border:1px solid #ced4da;box-sizing:border-box;display:table;min-height:50px;padding:0;border-radius:5px;margin:5px}:host ::ng-deep .rating{color:red}:host .off-screen{display:block;float:left;height:0;overflow:hidden;text-indent:-99999px;width:0}:host .box-row{display:flex;width:100%}:host .box-row .label{float:left;font-weight:700;margin-right:5px}:host .box-row .value{float:left}:host .box-row.left{text-align:left}:host .box-row.right .label{font-weight:700;flex:1;text-align:right}:host .box-row.center{width:inherit;display:table;margin:auto}:host .box-row.emphasize{font-weight:700;font-size:1.8rem}:host .box-row.side-by-side{max-width:250px;width:inherit;display:table;float:right;margin:0 5px}:host .above-viewport{padding:5px;box-sizing:border-box}:host .viewport{border-color:purple;box-sizing:border-box;border-top:1px solid #bcd;border-bottom:1px solid #bcd;min-height:150px;overflow:hidden;position:relative;margin:0 auto;box-sizing:border-box;cursor:pointer}:host .viewport img.content{margin:auto;display:table}:host .viewport video.content{margin:auto;display:table}:host .viewport .hover{position:absolute;background-color:#fff;top:-10000px;left:-10000px;opacity:0;pointer-events:none}:host .viewport:hover{border-color:purple}:host .below-viewport{padding:5px;box-sizing:border-box}.clearblock{clear:both;display:block;width:100%;height:0;padding:0;margin:0}:host:focus{border-color:#0ba}:host:hover{border-color:purple;box-shadow:1px 1px 11px purple}"]}]}],e.ctorParameters=function(){return[]},e.propDecorators={largeImage:[{type:t.ViewChild,args:["largeImage"]}],onselect:[{type:t.Output,args:["onselect"]}],item:[{type:t.Input,args:["item"]}],viewport:[{type:t.Input,args:["viewport"]}],metadata:[{type:t.Input,args:["metadata"]}],effects:[{type:t.Input,args:["effects"]}]},e}(),i=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[o.CommonModule,r.IntoPipeModule],declarations:[n],exports:[n],entryComponents:[],schemas:[t.CUSTOM_ELEMENTS_SCHEMA]}]}],e}();e.FlexiblePreviewBoxComponent=n,e.FlexiblePreviewBoxModule=i,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=sedeh-flexible-preview-box.umd.min.js.map