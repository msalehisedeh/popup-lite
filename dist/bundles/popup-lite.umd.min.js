!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("rxjs/Subject"),require("@angular/common"),require("drag-enabled")):"function"==typeof define&&define.amd?define(["exports","@angular/core","rxjs/Subject","@angular/common","drag-enabled"],e):e(t["popup-lite"]={},t.ng.core,t.Rx,t.ng.common,t.dragEnabled)}(this,function(t,e,a,i,o){"use strict";var n=function(){function t(t,e,i){this.componentFactoryResolver=e,this.renderer=i,this.extraclasses="",this.config={id:"",close:!1,overlay:!1,closeOnOverlay:!1,minimize:!1,maximize:!1,dragable:!1,resizable:!1,centered:!1,fixed:!1,pinable:!1,height:"",width:"",maxBodyHeight:"",minBodyHeight:"",minWidth:"",maxWidth:"",adjustHeight:!1,isOpen:!1,isOpening:!1,minimized:!1,maximized:!1,pinned:!1,zIndex:100,top:""},this.el=t.nativeElement}return t.prototype.onResize=function(t){if(this.config.centered&&!this.config.pinned){var e=this.el.querySelector(".popup-lite"),i=this.el.parentElement;this.renderer.setElementStyle(e,"left",(i.getBoundingClientRect().width-e.getBoundingClientRect().width)/2+"px")}},t.prototype.calcMaxHeight=function(t,e){for(var i=t.childNodes,o=0,n=0;n<i.length;n++)if(i[n].nodeName.toLowerCase()===e){i=i[n].childNodes;for(var r=0;r<i.length;r++)1===i[r].nodeType&&(o+=i[r].clientHeight+i[r].offsetHeight);break}return o},t.prototype.init=function(t,e,i,o){var n=this,r=this.componentFactoryResolver.resolveComponentFactory(t),s=this.content.createComponent(r);(s.instance.data=e,s.instance.id=i.id,i)&&Object.keys(i).map(function(t){n.config[t]=i[t]});this.selector=o,this.display(i)},t.prototype.display=function(t){return this.config.maxBodyHeight=t&&t.maxHeight?t.maxHeight:"",this.config.minWidth=t&&t.minWidth?t.minWidth:"",this.config.maxWidth=t&&t.maxWidth?t.maxWidth:"",this.config.top=t&&t.top?t.top:"",this.config.isOpening=!0,this.config.adjustHeight=!(!t||!t.adjustHeight)&&t.adjustHeight,this.extraclasses=this.config.header?"":"header-off ",this.extraclasses+=this.config.footer?"":"footer-off ",setTimeout(function(){this.onResize(null),this.config.isOpen=!0}.bind(this),10),!1},t.prototype.keyUp=function(t){t.preventDefault(),13===t.which&&t.target.click()},t.prototype.closeOverlay=function(){this.config.closeOnOverlay&&this.closeModal(null,{id:this.config.id,confirmed:!1})},t.prototype.onClose=function(t){this.closeModal(t,{id:this.config.id,confirmed:!1})},t.prototype.closeModal=function(t,e){return this.config.isOpening=!1,this.config.overlay=!1,this.config.isOpen=!1,this.selector.popedOut(this.config.id,e),!1},t.prototype.minimizeModal=function(t){if(this.config.minimized=!this.config.minimized,this.config.resizable){var e=this.el.querySelector(".resize-corner"),i=this.el.querySelector(".popup-lite"),o=this.el.querySelector(".modal-body");this.config.minimized?(o.style.height="0",i.style.height="inherit"):(o.style.height=o.getAttribute("oh"),o.style.maxHeight="inherit"),e.style.display=this.config.minimized||this.config.maximized?"none":"block"}return!1},t.prototype.maximizeModal=function(t){if(this.config.maximized=!this.config.maximized,this.config.resizable){var e=this.el.querySelector(".resize-corner"),i=this.el.querySelector(".modal-body");i.getAttribute("oh")&&(i.style.height=i.getAttribute("oh")),e.style.display=this.config.minimized||this.config.maximized?"none":"block"}return!1},t.prototype.selected=function(t){return this.selector.setSelected(this.config.id),!0},t.prototype.pinModal=function(t){return this.config.pinned=!this.config.pinned,!1},t.prototype.dragEnabled=function(t){return this.config.dragable&&!this.config.pinned},t.prototype.onDragStart=function(t){},t.prototype.onDrag=function(t){t.node===this.dragHeader.element.nativeElement&&(this.renderer.setElementStyle(t.medium,"left",t.clientX-t.offset.x+"px"),this.renderer.setElementStyle(t.medium,"top",t.clientY-t.offset.y+"px"))},t.prototype.onDragEnd=function(t){t.node===this.dragHeader.element.nativeElement&&(this.renderer.setElementStyle(t.medium,"left",t.clientX-t.offset.x+"px"),this.renderer.setElementStyle(t.medium,"top",t.clientY-t.offset.y+"px"))},t.prototype.resizeEnabled=function(t){return this.config.resizable},t.prototype.onResizeStart=function(t){},t.prototype.onResizeProgress=function(t){if(t.node===this.resizer.element.nativeElement){var e=t.medium.getBoundingClientRect(),i=t.clientX-t.offset.x-e.left,o=t.clientY-t.offset.y-e.top,n=this.el.querySelector(".modal-header"),r=this.el.querySelector(".modal-footer"),s=this.el.querySelector(".modal-body"),a=r.getBoundingClientRect().height,d=o-n.getBoundingClientRect().height-a-2;200<i&&60<o&&(this.renderer.setElementStyle(t.medium,"width",i+"px"),this.renderer.setElementStyle(t.medium,"height",o+"px"),this.renderer.setElementStyle(s,"height",d+"px"))}},t.prototype.onResizeEnd=function(t){if(t.node===this.resizer.element.nativeElement){var e=t.medium.getBoundingClientRect(),i=t.clientX-t.offset.x-e.left,o=t.clientY-t.offset.y-e.top;if(200<i&&60<o){var n=this.el.querySelector(".modal-header"),r=this.el.querySelector(".modal-footer"),s=this.el.querySelector(".modal-body"),a=r.getBoundingClientRect().height,d=o-n.getBoundingClientRect().height-a-2;this.renderer.setElementStyle(t.medium,"width",i+"px"),this.renderer.setElementStyle(t.medium,"height",o+"px"),this.renderer.setElementStyle(s,"height",d+"px")}}},t}();n.decorators=[{type:e.Component,args:[{selector:"popup-lite",template:'<div class="popup-lite-overlay" #overlay\n\t(click)="closeOverlay()"\n\t[style.display]="config.overlay ? \'block\' : \'none\'"></div>\n<div #modalWondow\n\tclass="popup-lite"\n\ttabindex="0"\n\t[style.minWidth]="config.minWidth"\n\t[style.maxWidth]="config.maxWidth"\n\t[style.display]="config.isOpening ? \'block\' : \'none\'"\n\t[style.position]="config.fixed ? \'fixed\':\'absolute\'"\n\t[style.top]="config.top.length ? config.top : \'\'"\n\t[style.height]="config.height"\n\t[style.zIndex]="config.zIndex"\n\t[class.fade-in]="config.isOpen"\n\t[class.maximized]="config.maximized"\n\t[class.pinned]="config.pinned"\n\t[style.z-index]="config.selected ? 105 : 100"\n\t(keyup)="keyUp($event)"\n\t(focus)="selected($event)"\n\t(click)="selected($event)">\n\t\t<div class="controls">\n\t\t\t<a *ngIf="config.pinable"\n\t\t\t\tclass="pin" tabindex="0"\n\t\t\t\t(click)="pinModal($event)">\n\t\t\t\t<span *ngIf="!config.pinned" class="fa fw fa-unlock" aria-hidden="true"></span>\n\t\t\t\t<span *ngIf="config.pinned" class="fa fw fa-lock" aria-hidden="true"></span>\n\t\t\t\t<span class="off-screen">Pin</span>\n\t\t\t</a><a *ngIf="config.minimize"\n\t\t\t\tclass="minify" tabindex="0"\n\t\t\t\t(click)="minimizeModal($event)"\n\t\t\t\t[class.clicked]="config.minimized">\n\t\t\t\t<span class="fa fw fa-window-minimize" aria-hidden="true"></span>\n\t\t\t\t<span class="off-screen">Minimize</span>\n\t\t\t</a><a *ngIf="config.maximize"\n\t\t\t\tclass="maxify" tabindex="0"\n\t\t\t\t(click)="maximizeModal($event)"\n\t\t\t\t[class.clicked]="config.maximized">\n\t\t\t\t<span class="fa fw fa-window-maximize" aria-hidden="true"></span>\n\t\t\t\t<span class="off-screen">Maximize</span>\n\t\t\t</a><a *ngIf="config.close"\n\t\t\t\tclass="close" tabindex="0"\n\t\t\t\t(click)="onClose($event)">\n\t\t\t\t<span class="fa fw fa-window-close" aria-hidden="true"></span>\n\t\t\t\t<span class="off-screen">Close</span>\n\t\t\t</a>\n\t\t</div>\n\t\t<a *ngIf="config.resizable"\n\t\t\t#resizer\n\t\t\tclass="resize-corner"\n\t\t\ttabindex="0"\n\t\t\t[medium]="modalWondow"\n\t\t\t[dragInDocument]="resizeEnabled.bind(this)"\n\t\t\t(onDragStart)="onResizeStart($event)"\n\t\t\t(onDrag)="onResizeProgress($event)"\n\t\t\t(onDragEnd)="onResizeEnd($event)">\n\t\t\t<span class="fa fw fa-ellipsis-h" aria-hidden="true"></span>\n\t\t\t<span class="off-screen">Resize</span>\n\t\t</a>\n\t\t<div *ngIf="config.header"\n\t\t\t#dragHeader\n\t\t\tclass="modal-header"\n\t\t\t[id]="config.id"\n\t\t\t[style.cursor]="(config.dragable && !config.pinned) ? \'all-scroll\':\'default\'"\n\t\t\t[class.pinned]="config.pinned"\n\t\t\t[class.minified]="config.minimized"\n\t\t\t[medium]="modalWondow"\n\t\t\t[dragInDocument]="dragEnabled.bind(this)"\n\t\t\t(onDragStart)="onDragStart($event)"\n\t\t\t(onDrag)="onDrag($event)"\n\t\t\t(onDragEnd)="onDragEnd($event)"\n\t\t\t(dblclick)="maximizeModal($event)">\n\t\t\t<span *ngIf="config.idOnHeader" class="header-title" [textContent]="config.id"></span>\n\t\t</div>\n\t\t  <div class="modal-body"\n\t\t     [class.minimized]="config.minimized"\n\t\t     [style.minHeight]="config.minBodyHeight"\n\t\t\t [style.maxHeight]="config.maxBodyHeight">\n\t\t\t <ng-template  #content></ng-template>\n\t\t  </div>\n\t      <div class="modal-footer" *ngIf="config.footer"\n\t\t  \t\t[class.minimized]="config.minimized">\n\t         <ng-content select="[modal-footer]"></ng-content>\n\t\t  </div>\n\t    </div>',styles:[":host{display:inline-block!important}:host .centered{text-align:center;margin:0 auto}:host .popup-lite h2{font-size:.8em;margin:0}:host .popup-lite-overlay{position:absolute;background-color:rgba(44,44,44,.44);width:100%;height:100%;top:0;left:0;z-index:104}:host .popup-lite{-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;top:100px;left:100px;border-radius:6px;padding:0;z-index:100;background-color:transparent;min-width:300px;-webkit-box-shadow:0 3px 9px rgba(0,0,0,.5);-ms-box-shadow:0 3px 9px rgba(0,0,0,.5);-o-box-shadow:0 3px 9px rgba(0,0,0,.5);box-shadow:0 3px 9px rgba(0,0,0,.5);opacity:0;-webkit-transition:opacity .25s ease-in-out;transition:opacity .25s ease-in-out}:host .popup-lite .off-screen{display:block;float:left;height:0;overflow:hidden;text-indent:-99999px;width:0}:host .popup-lite.fade-in{opacity:1;-webkit-transition:opacity .25s ease-in-out;transition:opacity .25s ease-in-out}:host .popup-lite .controls{position:absolute;top:0;right:2px;border:1px solid #eee;background-color:#fff;border-radius:2px;border-top:0;z-index:2}:host .popup-lite .controls a{text-align:center;border:1px solid #999;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:0 0 2px 2px;border-top:0;display:inline-block;width:21px;height:21px}:host .popup-lite .controls a span{display:inline-block}:host .popup-lite .controls a.close{cursor:pointer}:host .popup-lite .controls a.close:hover{color:red}:host .popup-lite .controls a.minify{cursor:pointer}:host .popup-lite .controls a.minify.clicked,:host .popup-lite .controls a.minify:hover{color:red}:host .popup-lite .controls a.pin{cursor:pointer}:host .popup-lite .controls a.pin.clicked,:host .popup-lite .controls a.pin:hover{color:red}:host .popup-lite .controls a.maxify{cursor:pointer}:host .popup-lite .controls a.maxify.clicked,:host .popup-lite .controls a.maxify:hover{color:red}:host .popup-lite a{text-align:center;border:1px solid #999;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:2px}:host .popup-lite a.resize-corner{position:absolute;height:5px;bottom:12px;right:4px;width:13px;border:0;cursor:se-resize}:host .popup-lite a.resize-corner:hover{color:red}:host .popup-lite .modal-header{background-color:#fff;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:2px 2px 0 0;min-width:100%;min-height:24px;padding:5px 10px}:host .popup-lite .modal-header .header-title{position:absolute;top:0;left:0;padding:2px 5px;-webkit-box-sizing:border-box;box-sizing:border-box;font-size:.9rem}:host .popup-lite .modal-body{background-color:#fff;-webkit-box-sizing:border-box;box-sizing:border-box;padding:10px;overflow-y:auto}:host .popup-lite .modal-footer{background-color:#fff;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:0 0 2px 2px;min-width:100%;min-height:20px;padding:5px 10px}:host .popup-lite .modal-footer .right{text-align:right}:host .header-off{border-top-left-radius:2px;border-top-right-radius:5px}:host .footer-off{border-bottom-right-radius:5px;border-bottom-left-radius:2px}:host .minimized{padding-top:0!important;padding-bottom:0!important;min-height:0!important}:host .maximized{top:0!important;left:0!important;min-width:100%!important;min-height:100%!important}:host .maximized .modal-footer,:host .maximized .modal-header{width:100%}:host .maximized .modal-body{min-width:100%;min-height:95vh}:host .minimized{min-height:0!important;height:0!important}:host .minified{border-radius:6px!important}:host .popup-lite.maximized{height:inherit!important;min-height:inherit!important}:host .pinned{border:1px dotted red}:host .block-key-events{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none}"]}]}],n.ctorParameters=function(){return[{type:e.ElementRef},{type:e.ComponentFactoryResolver},{type:e.Renderer}]},n.propDecorators={content:[{type:e.ViewChild,args:["content",{read:e.ViewContainerRef}]}],modalWondow:[{type:e.ViewChild,args:["modalWondow",{read:e.ViewContainerRef}]}],resizer:[{type:e.ViewChild,args:["resizer",{read:e.ViewContainerRef}]}],dragHeader:[{type:e.ViewChild,args:["dragHeader",{read:e.ViewContainerRef}]}],onResize:[{type:e.HostListener,args:["window:resize",["$event"]]}]};var r=function(){function t(t,e,i){this.componentFactoryResolver=t,this.appRef=e,this.injector=i,this.componentRef={},this.status=[]}return t.prototype.createPopupLiteComponent=function(){var t=this.componentFactoryResolver.resolveComponentFactory(n).create(this.injector);return this.appRef.attachView(t.hostView),this.domElem=t.hostView.rootNodes[0],document.body.appendChild(this.domElem),t},t.prototype.popedOut=function(t,e){var i=this.componentRef[t];this.appRef.detachView(i.hostView),i.destroy(),delete this.componentRef[t],this.status[t].next(e),delete this.status[t]},t.prototype.setSelected=function(t){var e=this;Object.keys(this.componentRef).map(function(t){e.componentRef[t].instance.config.selected=!1}),this.componentRef[t].instance.config.selected=!0},t.prototype.openWindow=function(t,e,i,o){var n=this.createPopupLiteComponent(),r=n.instance,s={close:!0,minimize:!0,maximize:!0,resizable:!0,header:!0,footer:!0,dragable:!0,pinable:!0,idOnHeader:!0,centered:!0};o&&Object.keys(o).map(function(t){s[t]=o[t]});return s.id=e||""+(new Date).getTime(),this.componentRef[s.id]=n,this.status[s.id]=new a.Subject,r.init(t,i,s,this),this.setSelected(s.id),this.status[s.id]},t.prototype.openModal=function(t,e,i,o){var n=this.createPopupLiteComponent(),r=n.instance,s={overlay:!0,close:!0,closeOnOverlay:!0,header:!0,footer:!0,centered:!0};o&&Object.keys(o).map(function(t){s[t]=o[t]});return s.id=e||""+(new Date).getTime(),this.componentRef[s.id]=n,this.status[s.id]=new a.Subject,r.init(t,i,s,this),this.setSelected(s.id),this.status[s.id]},t.prototype.openDialog=function(t,e,i,o){var n=this.createPopupLiteComponent(),r=n.instance,s={overlay:!0,close:!0,closeOnOverlay:!0,header:!0,footer:!0,centered:!0};o&&Object.keys(o).map(function(t){s[t]=o[t]});return s.id=e||""+(new Date).getTime(),this.componentRef[s.id]=n,this.status[s.id]=new a.Subject,r.init(t,i,s,this),this.setSelected(s.id),this.status[s.id]},t.prototype.confirm=function(t,e){var i={id:t,confirmed:!0};e&&Object.keys(e).map(function(t){i[t]=e[t]});this.popedOut(t,i)},t.prototype.cancel=function(t,e){var i={id:t,confirmed:!0};e&&Object.keys(e).map(function(t){i[t]=e[t]});this.popedOut(t,{id:t,confirmed:!1})},t}();r.decorators=[{type:e.Injectable}],r.ctorParameters=function(){return[{type:e.ComponentFactoryResolver},{type:e.ApplicationRef},{type:e.Injector}]};var s=function(){};s.decorators=[{type:e.NgModule,args:[{imports:[i.CommonModule,o.DragDropModule],declarations:[n],exports:[n],entryComponents:[n],providers:[r],schemas:[e.CUSTOM_ELEMENTS_SCHEMA]}]}],s.ctorParameters=function(){return[]},t.PopupLiteComponent=n,t.PopupLiteService=r,t.PopupLiteModule=s,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=popup-lite.umd.min.js.map
