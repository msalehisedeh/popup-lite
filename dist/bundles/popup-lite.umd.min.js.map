{"version":3,"sources":["ng://popup-lite/src/app/popup-lite/components/popup-lite.component.ts","ng://popup-lite/src/app/popup-lite/injectables/popup-lite.service.ts","ng://popup-lite/src/app/popup-lite/popup-lite.module.ts"],"names":["PopupLiteComponent","el","componentFactoryResolver","renderer","this","id","close","overlay","closeOnOverlay","minimize","maximize","dragable","resizable","centered","fixed","pinable","height","width","maxBodyHeight","minBodyHeight","minWidth","maxWidth","adjustHeight","isOpen","isOpening","minimized","maximized","pinned","zIndex","top","nativeElement","prototype","onResize","event","config","ne","querySelector","root","parentElement","setElementStyle","getBoundingClientRect","calcMaxHeight","node","target","list","childNodes","max","i","length","nodeName","toLowerCase","i_1","nodeType","clientHeight","offsetHeight","init","component","data","selector","_this","componentFactory","resolveComponentFactory","instance","content","createComponent","popupTitle","bind","Object","keys","map","key","display","props","maxHeight","extraclasses","header","footer","setTimeout","keyUp","preventDefault","which","click","closeOverlay","closeModal","confirmed","onClose","$event","result","popedOut","minimizeModal","wn","bd","style","getAttribute","maximizeModal","selected","setSelected","pinModal","dragEnabled","onDragStart","onDrag","dragHeader","element","medium","clientX","offset","x","clientY","y","onDragEnd","resizeEnabled","onResizeStart","onResizeProgress","resizer","wr","left","hd","ft","fth","h","onResizeEnd","Component","args","template","ElementRef","ComponentFactoryResolver","Renderer","ViewChild","read","ViewContainerRef","HostListener","PopupLiteService","appRef","injector","createPopupLiteComponent","ref","create","attachView","hostView","domElem","rootNodes","document","body","appendChild","componentRef","detachView","destroy","status","next","openWindow","localConfig","idOnHeader","Date","getTime","Subject","openModal","openDialog","confirm","info","cancel","Injectable","ApplicationRef","Injector","PopupLiteModule","NgModule","imports","CommonModule","DragDropModule","declarations","exports","entryComponents","providers","schemas","CUSTOM_ELEMENTS_SCHEMA"],"mappings":"oZACA,IAAAA,EAAA,WAgFC,SAAAA,EACCC,EACQC,EACAC,GADAC,KAAAF,yBAAAA,EACAE,KAAAD,SAAAA,oBAxDc,eAwBA,CACtBE,GAAG,GACHC,OAAO,EACPC,SAAS,EACTC,gBAAgB,EAChBC,UAAU,EACVC,UAAU,EACVC,UAAS,EACTC,WAAU,EACVC,UAAU,EACVC,OAAO,EACPC,SAAQ,EAERC,OAAO,GACPC,MAAM,GACNC,cAAc,GACdC,cAAc,GACdC,SAAS,GACTC,SAAS,GACTC,cAAa,EACbC,QAAQ,EACRC,WAAU,EACVC,WAAU,EACVC,WAAU,EACVC,QAAO,EACPC,OAAO,IACPC,IAAK,IAOLzB,KAAKH,GAAKA,EAAG6B,qBAzCd9B,EAAA+B,UAAAC,SADA,SACSC,GACR,GAAG7B,KAAK8B,OAAOrB,WAAaT,KAAK8B,OAAOP,OAAO,CAC9C,IAAIQ,EAAK/B,KAAKH,GAAGmC,cAAc,eAC3BC,EAAoBjC,KAAKH,GAAGqC,cACvBlC,KAAKD,SAASoC,gBAAgBJ,EAAI,QAAUE,EAAKG,wBAAwBvB,MAAMkB,EAAGK,wBAAwBvB,OAAO,EAAK,QAwCzHjB,EAAA+B,UAAAU,uBAAcC,EAAUC,GAI/B,IAHA,IAAIC,EAAOF,EAAKG,WACZC,EAAM,EAEDC,EAAI,EAAGA,EAAIH,EAAKI,OAAQD,IAC9B,GAAGH,EAAKG,GAAGE,SAASC,gBAAgBP,EAAO,CAC1CC,EAAOA,EAAKG,GAAGF,WACf,IAAK,IAAIM,EAAI,EAAGA,EAAIP,EAAKI,OAAQG,IACV,IAAnBP,EAAKO,GAAGC,WACVN,GAAQF,EAAKO,GAAGE,aAAaT,EAAKO,GAAGG,cAGzC,MAGC,OAAOR,GAGX9C,EAAA+B,UAAAwB,KAAA,SAAKC,EAAWC,EAAMvB,EAA0BwB,GAAhD,IAAAC,EAAAvD,KACOwD,EAAmBxD,KAAKF,yBAAyB2D,wBAAwBL,GAEzEM,EADe1D,KAAK2D,QAAQC,gBAAgBJ,GACgB,UAClEE,EAASL,KAAOA,EAChBK,EAASzD,GAAK6B,EAAO7B,GAElByD,EAASG,WACX/B,EAAO+B,WAAaH,EAASG,WAAWC,KAAKJ,GAE7C5B,EAAO+B,WAAa,SAAC5D,GAAO,OAAAA,GAGzB6B,IACUiC,OAAOC,KAAKlC,GACpBmC,IAAI,SAACC,GACTX,EAAKzB,OAAOoC,GAAOpC,EAAOoC,KAG5BlE,KAAKsD,SAAWA,EAEhBtD,KAAKmE,QAAQrC,IAGPlC,EAAA+B,UAAAwC,iBAAQC,GAad,OAZApE,KAAK8B,OAAOhB,cAAgBsD,GAASA,EAAMC,UAAYD,EAAMC,UAAU,GACtErE,KAAK8B,OAAOd,SAAWoD,GAASA,EAAMpD,SAAWoD,EAAMpD,SAAS,GAChEhB,KAAK8B,OAAOb,SAAWmD,GAASA,EAAMnD,SAAWmD,EAAMnD,SAAS,GAChEjB,KAAK8B,OAAOL,IAAM2C,GAASA,EAAM3C,IAAM2C,EAAM3C,IAAM,GACnDzB,KAAK8B,OAAOV,WAAY,EACxBpB,KAAK8B,OAAOZ,gBAAekD,IAASA,EAAMlD,eAAekD,EAAMlD,aAC/DlB,KAAKsE,aAAetE,KAAK8B,OAAOyC,OAAS,GAAG,cAC5CvE,KAAKsE,cAAgBtE,KAAK8B,OAAO0C,OAAS,GAAG,cAC9CC,WAAW,WACVzE,KAAK4B,SAAS,MACd5B,KAAK8B,OAAOX,QAAS,GACpB2C,KAAK9D,MAAM,KACN,GAGRJ,EAAA+B,UAAA+C,MAAA,SAAM7C,GACLA,EAAM8C,iBAGO,KAFA9C,EAAM+C,OAGlB/C,EAAMU,OAAOsC,SAGfjF,EAAA+B,UAAAmD,aAAA,WACK9E,KAAK8B,OAAO1B,gBAChBJ,KAAK+E,WAAW,KAAM,CAAE9E,GAAID,KAAK8B,OAAO7B,GAAI+E,WAAW,KAGxDpF,EAAA+B,UAAAsD,QAAA,SAAQpD,GACP7B,KAAK+E,WAAWlD,EAAO,CAAE5B,GAAID,KAAK8B,OAAO7B,GAAI+E,WAAW,KAEzDpF,EAAA+B,UAAAoD,WAAA,SAAWG,EAAYC,GAMtB,OALAnF,KAAK8B,OAAOV,WAAY,EACxBpB,KAAK8B,OAAO3B,SAAU,EACtBH,KAAK8B,OAAOX,QAAS,EACrBnB,KAAKsD,SAAS8B,SAASpF,KAAK8B,OAAO7B,GAAIkF,IAEhC,GAERvF,EAAA+B,UAAA0D,cAAA,SAAcH,GAEb,GADAlF,KAAK8B,OAAOT,WAAarB,KAAK8B,OAAOT,UAClCrB,KAAK8B,OAAOtB,UAAU,CACvB,IAAIuB,EAAS/B,KAAKH,GAAGmC,cAAc,kBAC/BsD,EAAStF,KAAKH,GAAGmC,cAAc,eAC/BuD,EAASvF,KAAKH,GAAGmC,cAAc,eAC/BhC,KAAK8B,OAAOT,WAEhBkE,EAAGC,MAAM5E,OAAS,IAClB0E,EAAGE,MAAM5E,OAAO,YAHW2E,EAAGC,MAAM5E,OAAO2E,EAAGE,aAAa,MAAMF,EAAGC,MAAMnB,UAAW,WAKrFtC,EAAGyD,MAAMrB,QAAUnE,KAAK8B,OAAOT,WAAarB,KAAK8B,OAAOR,UAAa,OAAO,QAE9E,OAAO,GAER1B,EAAA+B,UAAA+D,cAAA,SAAcR,GAEb,GADAlF,KAAK8B,OAAOR,WAAatB,KAAK8B,OAAOR,UAClCtB,KAAK8B,OAAOtB,UAAU,CACvB,IAAIuB,EAAS/B,KAAKH,GAAGmC,cAAc,kBAC/BuD,EAASvF,KAAKH,GAAGmC,cAAc,eAChCuD,EAAGE,aAAa,QAAOF,EAAGC,MAAM5E,OAAO2E,EAAGE,aAAa,OAC1D1D,EAAGyD,MAAMrB,QAAUnE,KAAK8B,OAAOT,WAAarB,KAAK8B,OAAOR,UAAa,OAAO,QAE9E,OAAO,GAER1B,EAAA+B,UAAAgE,SAAA,SAAST,GAER,OADAlF,KAAKsD,SAASsC,YAAY5F,KAAK8B,OAAO7B,KAC/B,GAERL,EAAA+B,UAAAkE,SAAA,SAASX,GAER,OADAlF,KAAK8B,OAAOP,QAAUvB,KAAK8B,OAAOP,QAC3B,GAGR3B,EAAA+B,UAAAmE,YAAA,SAAYjE,GACX,OAAO7B,KAAK8B,OAAOvB,WAAaP,KAAK8B,OAAOP,QAE7C3B,EAAA+B,UAAAoE,YAAA,SAAYlE,KAEZjC,EAAA+B,UAAAqE,OAAA,SAAOnE,GACHA,EAAMS,OAAStC,KAAKiG,WAAWC,QAAQxE,gBACzC1B,KAAKD,SAASoC,gBAAgBN,EAAMsE,OAAQ,OAAStE,EAAMuE,QAAQvE,EAAMwE,OAAOC,EAAG,MACnFtG,KAAKD,SAASoC,gBAAgBN,EAAMsE,OAAQ,MAAQtE,EAAM0E,QAAQ1E,EAAMwE,OAAOG,EAAG,QAGpF5G,EAAA+B,UAAA8E,UAAA,SAAU5E,GACNA,EAAMS,OAAStC,KAAKiG,WAAWC,QAAQxE,gBACzC1B,KAAKD,SAASoC,gBAAgBN,EAAMsE,OAAQ,OAAStE,EAAMuE,QAAQvE,EAAMwE,OAAOC,EAAG,MACnFtG,KAAKD,SAASoC,gBAAgBN,EAAMsE,OAAQ,MAAQtE,EAAM0E,QAAQ1E,EAAMwE,OAAOG,EAAG,QAIpF5G,EAAA+B,UAAA+E,cAAA,SAAc7E,GACb,OAAO7B,KAAK8B,OAAOtB,WAEpBZ,EAAA+B,UAAAgF,cAAA,SAAc9E,KAEdjC,EAAA+B,UAAAiF,iBAAA,SAAiB/E,GAChB,GAAGA,EAAMS,OAAStC,KAAK6G,QAAQX,QAAQxE,cAAe,CACrD,IAAMoF,EAAKjF,EAAMsE,OAAO/D,wBAClBvB,EAAUgB,EAAMuE,QAAQvE,EAAMwE,OAAOC,EAAKQ,EAAGC,KAC7CnG,EAAUiB,EAAM0E,QAAQ1E,EAAMwE,OAAOG,EAAKM,EAAGrF,IAC/CuF,EAAKhH,KAAKH,GAAGmC,cAAc,iBAC3BiF,EAAKjH,KAAKH,GAAGmC,cAAc,iBAC3BuD,EAAKvF,KAAKH,GAAGmC,cAAc,eAC3BkF,EAAKD,EAAG7E,wBAAwBxB,OAEhCuG,EAAIvG,EADCoG,EAAG5E,wBAAwBxB,OACbsG,EAAK,EAEnB,IAANrG,GAAoB,GAAPD,IACfZ,KAAKD,SAASoC,gBAAgBN,EAAMsE,OAAQ,QAAStF,EAAM,MAC3Db,KAAKD,SAASoC,gBAAgBN,EAAMsE,OAAQ,SAAUvF,EAAO,MAC7DZ,KAAKD,SAASoC,gBAAgBoD,EAAI,SAAU4B,EAAE,SAIjDvH,EAAA+B,UAAAyF,YAAA,SAAYvF,GACX,GAAGA,EAAMS,OAAStC,KAAK6G,QAAQX,QAAQxE,cAAe,CACrD,IAAMoF,EAAKjF,EAAMsE,OAAO/D,wBAClBvB,EAAUgB,EAAMuE,QAAQvE,EAAMwE,OAAOC,EAAKQ,EAAGC,KAC7CnG,EAAUiB,EAAM0E,QAAQ1E,EAAMwE,OAAOG,EAAKM,EAAGrF,IAEnD,GAAS,IAANZ,GAAoB,GAAPD,EAAU,CACzB,IAAIoG,EAAKhH,KAAKH,GAAGmC,cAAc,iBAC3BiF,EAAKjH,KAAKH,GAAGmC,cAAc,iBAC3BuD,EAAKvF,KAAKH,GAAGmC,cAAc,eAC3BkF,EAAKD,EAAG7E,wBAAwBxB,OAEhCuG,EAAIvG,EADCoG,EAAG5E,wBAAwBxB,OACbsG,EAAK,EAE5BlH,KAAKD,SAASoC,gBAAgBN,EAAMsE,OAAQ,QAAStF,EAAM,MAC3Db,KAAKD,SAASoC,gBAAgBN,EAAMsE,OAAQ,SAAUvF,EAAO,MAC7DZ,KAAKD,SAASoC,gBAAgBoD,EAAI,SAAU4B,EAAE,6BAjPjDE,EAAAA,UAASC,KAAA,CAAC,CACPhE,SAAS,aACTiE,SAAA,s+NATHC,EAAAA,kBARAC,EAAAA,gCAGAC,EAAAA,6CAsBCC,EAAAA,UAASL,KAAA,CAAC,UAAW,CAACM,KAAMC,EAAAA,wCAG5BF,EAAAA,UAASL,KAAA,CAAC,cAAe,CAACM,KAAMC,EAAAA,oCAGhCF,EAAAA,UAASL,KAAA,CAAC,UAAW,CAACM,KAAMC,EAAAA,uCAG5BF,EAAAA,UAASL,KAAA,CAAC,aAAc,CAACM,KAAMC,EAAAA,qCAG/BC,EAAAA,aAAYR,KAAA,CAAC,gBAAiB,CAAC,gBA1CjC,GCAAS,EAAA,WAoBE,SAAAA,EACYjI,EACAkI,EACAC,GAFAjI,KAAAF,yBAAAA,EACAE,KAAAgI,OAAAA,EACAhI,KAAAiI,SAAAA,oBARW,eAEP,UASTF,EAAApG,UAAAuG,oCACP,IAAMC,EAAMnI,KAAKF,yBACf2D,wBAAwB7D,GACxBwI,OAAOpI,KAAKiI,UASd,OAPAjI,KAAKgI,OAAOK,WAAWF,EAAIG,UAE3BtI,KAAKuI,QAAWJ,EAAoC,SAClDK,UAAU,GAEZC,SAASC,KAAKC,YAAY3I,KAAKuI,SAExBJ,GAGRJ,EAAApG,UAAAyD,SAAA,SAASnF,EAAIkF,GACZ,IAAMgD,EAAMnI,KAAK4I,aAAa3I,GAE9BD,KAAKgI,OAAOa,WAAWV,EAAIG,UAC3BH,EAAIW,iBAEG9I,KAAK4I,aAAa3I,GAEzBD,KAAK+I,OAAO9I,GAAI+I,KAAK7D,UACdnF,KAAK+I,OAAO9I,IAEpB8H,EAAApG,UAAAiE,YAAA,SAAY3F,GAAZ,IAAAsD,EAAAvD,KACc+D,OAAOC,KAAKhE,KAAK4I,cAEzB3E,IAAI,SAACkE,GACY5E,EAAKqF,aAAaT,GAAa,SAAErG,OAAO6D,UAAW,IAEpD3F,KAAK4I,aAAa3I,GAAY,SAAE6B,OAAO6D,UAAW,GAGxEoC,EAAApG,UAAAsH,WAAA,SAAW7F,EAAgBnD,EAAYoD,EAAYvB,GAClD,IAAMqG,EAAMnI,KAAKkI,2BACXxE,EAAgCyE,EAAY,SAC5Ce,EAA6B,CAClChJ,OAAO,EACPG,UAAU,EACVC,UAAU,EACVE,WAAU,EACV+D,QAAQ,EACRC,QAAQ,EACRjE,UAAS,EACTI,SAAQ,EACRwI,YAAY,EACZ1I,UAAU,GAEPqB,GACUiC,OAAOC,KAAKlC,GACpBmC,IAAI,SAACC,GACTgF,EAAYhF,GAAOpC,EAAOoC,KAW5B,OARAgF,EAAYjJ,GAAKA,GAAU,IAAG,IAAImJ,MAAOC,UAEzCrJ,KAAK4I,aAAaM,EAAYjJ,IAAMkI,EACpCnI,KAAK+I,OAAOG,EAAYjJ,IAAM,IAAIqJ,EAAAA,QAElC5F,EAASP,KAAKC,EAAWC,EAAM6F,EAAalJ,MAC5CA,KAAK4F,YAAYsD,EAAYjJ,IAEtBD,KAAK+I,OAAOG,EAAYjJ,KAGhC8H,EAAApG,UAAA4H,UAAA,SAAUnG,EAAgBnD,EAAYoD,EAAYvB,GACjD,IAAMqG,EAAMnI,KAAKkI,2BACXxE,EAAgCyE,EAAY,SAC5Ce,EAA6B,CAClC/I,SAAS,EACTD,OAAO,EACPE,gBAAgB,EAChBmE,QAAQ,EACRC,QAAQ,EACR/D,UAAU,GAGPqB,GACUiC,OAAOC,KAAKlC,GACpBmC,IAAI,SAACC,GACTgF,EAAYhF,GAAOpC,EAAOoC,KAW5B,OARAgF,EAAYjJ,GAAKA,GAAU,IAAG,IAAImJ,MAAOC,UAEzCrJ,KAAK4I,aAAaM,EAAYjJ,IAAMkI,EACpCnI,KAAK+I,OAAOG,EAAYjJ,IAAM,IAAIqJ,EAAAA,QAElC5F,EAASP,KAAKC,EAAWC,EAAM6F,EAAalJ,MAC5CA,KAAK4F,YAAYsD,EAAYjJ,IAEtBD,KAAK+I,OAAOG,EAAYjJ,KAGhC8H,EAAApG,UAAA6H,WAAA,SAAWpG,EAAgBnD,EAAYoD,EAAYvB,GAClD,IAAMqG,EAAMnI,KAAKkI,2BACXxE,EAAgCyE,EAAY,SAC5Ce,EAA6B,CAClC/I,SAAS,EACTD,OAAO,EACPE,gBAAgB,EAChBmE,QAAQ,EACRC,QAAQ,EACR/D,UAAU,GAEPqB,GACUiC,OAAOC,KAAKlC,GACpBmC,IAAI,SAACC,GACTgF,EAAYhF,GAAOpC,EAAOoC,KAW5B,OARAgF,EAAYjJ,GAAKA,GAAU,IAAG,IAAImJ,MAAOC,UAEzCrJ,KAAK4I,aAAaM,EAAYjJ,IAAMkI,EACpCnI,KAAK+I,OAAOG,EAAYjJ,IAAM,IAAIqJ,EAAAA,QAElC5F,EAASP,KAAKC,EAAWC,EAAM6F,EAAalJ,MAC5CA,KAAK4F,YAAYsD,EAAYjJ,IAEtBD,KAAK+I,OAAOG,EAAYjJ,KAGhC8H,EAAApG,UAAA8H,QAAA,SAAQxJ,EAAIoD,GACX,IAAMqG,EAAO,CACZzJ,GAAIA,EACJ+E,WAAW,GAER3B,GACUU,OAAOC,KAAKX,GACpBY,IAAI,SAACC,GACTwF,EAAKxF,GAAOb,EAAKa,KAGnBlE,KAAKoF,SAASnF,EAAIyJ,IAEnB3B,EAAApG,UAAAgI,OAAA,SAAO1J,EAAIoD,GACV,IAAMqG,EAAO,CACZzJ,GAAIA,EACJ+E,WAAW,GAER3B,GACUU,OAAOC,KAAKX,GACpBY,IAAI,SAACC,GACTwF,EAAKxF,GAAOb,EAAKa,KAGnBlE,KAAKoF,SAASnF,EAAI,CAAEA,GAAIA,EAAI+E,WAAW,yBAjKxC4E,EAAAA,sDAVGnC,EAAAA,gCAEAoC,EAAAA,sBAHAC,EAAAA,cAFJ,GCDAC,EAAA,oDAOCC,EAAAA,SAAQ1C,KAAA,CAAC,CACR2C,QAAS,CACPC,EAAAA,aACAC,EAAAA,gBAEFC,aAAc,CACZxK,GAEFyK,QAAS,CACPzK,GAEF0K,gBAAiB,CACf1K,GAEF2K,UAAW,CACTxC,GAEFyC,QAAS,CAACC,EAAAA,8BAxBZ","sourcesContent":["\nimport {\n\tComponent,\n\tComponentFactory, \n\tReflectiveInjector,\n\tViewContainerRef,\n\tComponentFactoryResolver,\n\tInput,\n\tOutput,\n\tRenderer,\n\tHostListener,\n\tEventEmitter,\n\tInjectable,\n\tViewChild,\n\tElementRef} from \"@angular/core\";\n\nimport { DragEvent } from 'drag-enabled';\n\nimport { PopupLiteService } from '../injectables/popup-lite.service';\nimport { PopupLiteContentComponent, WindowLiteSelection, PopupLiteOptions, WindowOptions } from '../interfaces/popup-lite.interface';\n\n@Component({\n    selector:'popup-lite',\n    templateUrl: './popup-lite.component.html',\n\tstyleUrls: ['./popup-lite.component.scss']\n})\nexport class PopupLiteComponent {\n\tprivate el:HTMLElement;\n\tprivate extraclasses = \"\";\n\tprivate selector: WindowLiteSelection;\n\n\t@ViewChild(\"content\", {read: ViewContainerRef}) \n\tcontent: ViewContainerRef;\n\n\t@ViewChild(\"modalWondow\", {read: ViewContainerRef}) \n\tmodalWondow: ViewContainerRef;\n\t\n\t@ViewChild(\"resizer\", {read: ViewContainerRef}) \n\tresizer: ViewContainerRef;\n\t\n\t@ViewChild(\"dragHeader\", {read: ViewContainerRef}) \n\tdragHeader: ViewContainerRef;\n\t\n\t@HostListener('window:resize', ['$event'])\n\tonResize(event:any) {\n\t\tif(this.config.centered && !this.config.pinned){\n\t\t\tlet ne = this.el.querySelector('.popup-lite');\n\t\t\tlet root: HTMLElement = this.el.parentElement;\n            this.renderer.setElementStyle(ne, 'left', ((root.getBoundingClientRect().width-ne.getBoundingClientRect().width)/2) + \"px\");\n\t\t}\n\t}\n\n\tconfig: WindowOptions ={\n\t\tid:'',\n\t\tclose: false,\n\t\toverlay: false,\n\t\tcloseOnOverlay: false,\n\t\tminimize: false,\n\t\tmaximize: false,\n\t\tdragable:false,\n\t\tresizable:false,\n\t\tcentered: false,\n\t\tfixed: false,\n\t\tpinable:false,\n\n\t\theight:'',\n\t\twidth:'',\n\t\tmaxBodyHeight:'',\n\t\tminBodyHeight:'',\n\t\tminWidth:'',\n\t\tmaxWidth:'',\n\t\tadjustHeight:false,\n\t\tisOpen: false,\n\t\tisOpening:false,\n\t\tminimized:false,\n\t\tmaximized:false,\n\t\tpinned:false,\n\t\tzIndex:100,\n\t\ttop: ''\n\t}\n\n\tconstructor(\n\t\tel: ElementRef, \n\t\tprivate componentFactoryResolver: ComponentFactoryResolver,\n\t\tprivate renderer:Renderer) {\n\t\tthis.el = el.nativeElement;\n    }\n\n\tprivate calcMaxHeight(node:any, target:string){\n\t\tlet list = node.childNodes;\n\t\tlet max = 0;\n\n\t\tfor (let i = 0; i < list.length; i++) {\n\t\t   if(list[i].nodeName.toLowerCase()===target){\n\t\t\t   list = list[i].childNodes;\n\t\t\t   for (let i = 0; i < list.length; i++) {\n\t\t\t\t   if(list[i].nodeType===1){\n\t\t\t\t\t   max += (list[i].clientHeight+list[i].offsetHeight);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t   }\n        }\n    \treturn max;\n\t}\n\n\tinit(component, data, config: PopupLiteOptions, selector: WindowLiteSelection) {\n\t\tconst componentFactory = this.componentFactoryResolver.resolveComponentFactory(component);\n\t\tconst componentRef = this.content.createComponent(componentFactory);\n\t\tconst instance = (<PopupLiteContentComponent>componentRef.instance);\n\t\tinstance.data = data;\n\t\tinstance.id = config.id;\n\n\t\tif(instance.popupTitle) {\n\t\t\tconfig.popupTitle = instance.popupTitle.bind(instance);\n\t\t} else {\n\t\t\tconfig.popupTitle = (id) => id;\n\t\t}\n\t\t\n\t\tif (config) {\n\t\t\tconst list = Object.keys(config);\n\t\t\tlist.map((key) => {\n\t\t\t\tthis.config[key] = config[key];\n\t\t\t})\n\t\t}\n\t\tthis.selector = selector;\n\n\t\tthis.display(config);\n\t}\n\t\t\n\tpublic display(props:WindowOptions){\n\t\tthis.config.maxBodyHeight = props && props.maxHeight ? props.maxHeight:'';\n\t\t this.config.minWidth = props && props.minWidth ? props.minWidth:'';\n\t\t this.config.maxWidth = props && props.maxWidth ? props.maxWidth:'';\n\t\t this.config.top = props && props.top ? props.top : '';\n\t\t this.config.isOpening = true;\n\t\t this.config.adjustHeight = props && props.adjustHeight ? props.adjustHeight : false;\n\t\t this.extraclasses = this.config.header ? \"\":\"header-off \";\n\t\t this.extraclasses += this.config.footer ? \"\":\"footer-off \";\n\t\tsetTimeout(function() {\n\t\t\tthis.onResize(null);\n\t\t\tthis.config.isOpen = true;\n\t\t}.bind(this),10);\n\t\treturn false;\n\t}\n\n\tkeyUp(event) {\n\t\tevent.preventDefault();\n\t\tconst code = event.which;\n\n\t\tif (code === 13) {\n\t\t\tevent.target.click();\n\t\t}\t\t\n\t}\n\tcloseOverlay(){\n\t\tif (this.config.closeOnOverlay) {\n\t\tthis.closeModal(null, { id: this.config.id, confirmed: false });\n\t\t}\n\t}\n\tonClose(event) {\n\t\tthis.closeModal(event, { id: this.config.id, confirmed: false });\n\t}\n\tcloseModal($event:any, result){\n\t\tthis.config.isOpening = false;\n\t\tthis.config.overlay = false;\n\t\tthis.config.isOpen = false;\n\t\tthis.selector.popedOut(this.config.id, result);\n\n\t\treturn false;\n\t}\n\tminimizeModal($event:any){\n\t\tthis.config.minimized = !this.config.minimized;\n\t\tif(this.config.resizable){\n\t\t  let ne:any = this.el.querySelector('.resize-corner');\n\t\t  let wn:any = this.el.querySelector('.popup-lite');\n\t\t  let bd:any = this.el.querySelector('.modal-body');\n\t\t  if(!this.config.minimized){bd.style.height=bd.getAttribute(\"oh\");bd.style.maxHeight= \"inherit\";}\n\t\t  else {\n\t\t  bd.style.height = \"0\";\n\t\t  wn.style.height=\"inherit\"\n\t\t  }\n\t\t  ne.style.display= (this.config.minimized || this.config.maximized) ? 'none':'block';\n\t\t}\n\t\treturn false;\n\t}\n\tmaximizeModal($event:any){\n\t\tthis.config.maximized = !this.config.maximized;\n\t\tif(this.config.resizable){\n\t\t  let ne:any = this.el.querySelector('.resize-corner');\n\t\t  let bd:any = this.el.querySelector('.modal-body');\n\t\t  if(bd.getAttribute(\"oh\")){bd.style.height=bd.getAttribute(\"oh\");}\n\t\t  ne.style.display= (this.config.minimized || this.config.maximized) ? 'none':'block';\n\t\t}\n\t\treturn false;\n\t}\n\tselected($event: any){\n\t\tthis.selector.setSelected(this.config.id);\n\t\treturn true;\n\t}\n\tpinModal($event:any){\n\t\tthis.config.pinned = !this.config.pinned;\n\t\treturn false;\n\t}\n\n\tdragEnabled(event: DragEvent) {\n\t\treturn this.config.dragable && !this.config.pinned;\n\t}\n\tonDragStart(event: DragEvent){\n\t}\n\tonDrag(event: DragEvent){\n\t\tif(event.node === this.dragHeader.element.nativeElement) {\n\t\t\tthis.renderer.setElementStyle(event.medium, 'left', (event.clientX-event.offset.x)+\"px\");\n\t\t\tthis.renderer.setElementStyle(event.medium, 'top', (event.clientY-event.offset.y)+\"px\");\n\t\t}\n\t}\n\tonDragEnd(event: DragEvent){\n\t\tif(event.node === this.dragHeader.element.nativeElement) {\n\t\t\tthis.renderer.setElementStyle(event.medium, 'left', (event.clientX-event.offset.x)+\"px\");\n\t\t\tthis.renderer.setElementStyle(event.medium, 'top', (event.clientY-event.offset.y)+\"px\");\n\t\t}\n\t}\n\n\tresizeEnabled(event: DragEvent) {\n\t\treturn this.config.resizable;\n\t}\n\tonResizeStart(event: DragEvent){\n\t}\n\tonResizeProgress(event: DragEvent){\n\t\tif(event.node === this.resizer.element.nativeElement) {\n\t\t\tconst wr = event.medium.getBoundingClientRect();\n\t\t\tconst width =  (event.clientX-event.offset.x) - wr.left;\n\t\t\tconst height = (event.clientY-event.offset.y) - wr.top;\n\t\t\tlet hd = this.el.querySelector('.modal-header');\n\t\t\tlet ft = this.el.querySelector('.modal-footer');\n\t\t\tlet bd = this.el.querySelector('.modal-body');\n\t\t\tlet fth= ft.getBoundingClientRect().height;\n\t\t\tlet hdh= hd.getBoundingClientRect().height;\n\t\t\tlet h = height - hdh - fth -2;\n\n\t\t\tif(width>200 && height>60){\n\t\t\t\tthis.renderer.setElementStyle(event.medium, 'width', width+\"px\");\n\t\t\t\tthis.renderer.setElementStyle(event.medium, 'height', height+\"px\");\n\t\t\t\tthis.renderer.setElementStyle(bd, 'height', h+\"px\");\n\t\t\t}\n\t\t}\n\t}\n\tonResizeEnd(event: DragEvent){\n\t\tif(event.node === this.resizer.element.nativeElement) {\n\t\t\tconst wr = event.medium.getBoundingClientRect();\n\t\t\tconst width =  (event.clientX-event.offset.x) - wr.left;\n\t\t\tconst height = (event.clientY-event.offset.y) - wr.top;\n\n\t\t\tif(width>200 && height>60){\n\t\t\t\tlet hd = this.el.querySelector('.modal-header');\n\t\t\t\tlet ft = this.el.querySelector('.modal-footer');\n\t\t\t\tlet bd = this.el.querySelector('.modal-body');\n\t\t\t\tlet fth= ft.getBoundingClientRect().height;\n\t\t\t\tlet hdh= hd.getBoundingClientRect().height;\n\t\t\t\tlet h = height - hdh - fth -2;\n\t\t\t\t\t\n\t\t\t\tthis.renderer.setElementStyle(event.medium, 'width', width+\"px\");\n\t\t\t\tthis.renderer.setElementStyle(event.medium, 'height', height+\"px\");\n\t\t\t\tthis.renderer.setElementStyle(bd, 'height', h+\"px\");\n\t\t\t}\n\t\t}\n\t}\n}\n","\nimport {\n    Injectable,\n    Injector,\n    ComponentFactoryResolver,\n    EmbeddedViewRef,\n    ApplicationRef\n} from '@angular/core';\n\nimport { Observable, Subject} from 'rxjs';\n\nimport { PopupLiteComponent } from '../components/popup-lite.component';\nimport { PopupLiteOptions, WindowOptions, WindowLiteSelection, WindowLiteService } from '../interfaces/popup-lite.interface';\n\n@Injectable()\nexport class PopupLiteService implements WindowLiteService, WindowLiteSelection {\n\tprivate  componentRef = {};\n\tprivate  domElem;\n\tprivate status = [];\n\t// private windowsList: PopupLiteComponent[] = [];\n\n  constructor(\n      private componentFactoryResolver: ComponentFactoryResolver,\n      private appRef: ApplicationRef,\n      private injector: Injector\n  ) { }\n\n\tprivate createPopupLiteComponent() {\n\t\tconst ref = this.componentFactoryResolver\n\t\t\t.resolveComponentFactory(PopupLiteComponent)\n\t\t\t.create(this.injector);\n\n\t\tthis.appRef.attachView(ref.hostView);\n\n\t\tthis.domElem = (ref.hostView as EmbeddedViewRef<any>)\n\t\t\t.rootNodes[0] as HTMLElement;\n\n\t\tdocument.body.appendChild(this.domElem);\n\n\t\treturn ref;\n\t}\n  \n\tpopedOut(id, result: any) {\n\t\tconst ref = this.componentRef[id];\n\t\t\n\t\tthis.appRef.detachView(ref.hostView);\n\t\tref.destroy();\n\n\t\tdelete this.componentRef[id];\n\n\t\tthis.status[id].next(result);\n\t\tdelete this.status[id];\n\t}\n\tsetSelected(id){\n\t\tconst list = Object.keys(this.componentRef);\n\n\t\tlist.map((ref)=> {\n\t\t\t(<PopupLiteComponent>this.componentRef[ref].instance).config.selected = false;\n\t\t});\n\t\t(<PopupLiteComponent>this.componentRef[id].instance).config.selected = true;\n\t}\n\n\topenWindow(component: any, id: string, data?: any, config?: PopupLiteOptions): Observable<any>{\n\t\tconst ref = this.createPopupLiteComponent();\n\t\tconst instance = (<PopupLiteComponent>ref.instance);\n\t\tconst localConfig: WindowOptions = {\n\t\t\tclose: true,\n\t\t\tminimize: true,\n\t\t\tmaximize: true,\n\t\t\tresizable:true,\n\t\t\theader: true,\n\t\t\tfooter: true,\n\t\t\tdragable:true,\n\t\t\tpinable:true,\n\t\t\tidOnHeader: true,\n\t\t\tcentered: true\n\t\t};\n\t\tif (config) {\n\t\t\tconst list = Object.keys(config);\n\t\t\tlist.map((key) => {\n\t\t\t\tlocalConfig[key] = config[key];\n\t\t\t})\n\t\t}\n\t\tlocalConfig.id = id ? id : ''+new Date().getTime();\n\n\t\tthis.componentRef[localConfig.id] = ref;\n\t\tthis.status[localConfig.id] = new Subject<any>();\n\n\t\tinstance.init(component, data, localConfig, this);\n\t\tthis.setSelected(localConfig.id);\n\n\t\treturn this.status[localConfig.id];\n\t}\n\n\topenModal(component: any, id: string, data?: any, config?: PopupLiteOptions): Observable<any>{\n\t\tconst ref = this.createPopupLiteComponent();\n\t\tconst instance = (<PopupLiteComponent>ref.instance);\n\t\tconst localConfig: WindowOptions = {\n\t\t\toverlay: true,\n\t\t\tclose: true,\n\t\t\tcloseOnOverlay: true,\n\t\t\theader: true,\n\t\t\tfooter: true,\n\t\t\tcentered: true\n\t\t};\n\n\t\tif (config) {\n\t\t\tconst list = Object.keys(config);\n\t\t\tlist.map((key) => {\n\t\t\t\tlocalConfig[key] = config[key];\n\t\t\t})\n\t\t}\n\t\tlocalConfig.id = id ? id : ''+new Date().getTime();\n\n\t\tthis.componentRef[localConfig.id] = ref;\n\t\tthis.status[localConfig.id] = new Subject<any>();\n\n\t\tinstance.init(component, data, localConfig, this);\n\t\tthis.setSelected(localConfig.id);\n\n\t\treturn this.status[localConfig.id];\n\t}\n\n\topenDialog(component: any, id: string, data?: any, config?: PopupLiteOptions): Observable<any>{\n\t\tconst ref = this.createPopupLiteComponent();\n\t\tconst instance = (<PopupLiteComponent>ref.instance);\n\t\tconst localConfig: WindowOptions = {\n\t\t\toverlay: true,\n\t\t\tclose: true,\n\t\t\tcloseOnOverlay: true,\n\t\t\theader: true,\n\t\t\tfooter: true,\n\t\t\tcentered: true\n\t\t};\n\t\tif (config) {\n\t\t\tconst list = Object.keys(config);\n\t\t\tlist.map((key) => {\n\t\t\t\tlocalConfig[key] = config[key];\n\t\t\t})\n\t\t}\n\t\tlocalConfig.id = id ? id : ''+new Date().getTime();\n\n\t\tthis.componentRef[localConfig.id] = ref;\n\t\tthis.status[localConfig.id] = new Subject<any>();\n\n\t\tinstance.init(component, data, localConfig, this);\n\t\tthis.setSelected(localConfig.id);\n\n\t\treturn this.status[localConfig.id];\n\t}\n\n\tconfirm(id, data: {}) {\n\t\tconst info = { \n\t\t\tid: id, \n\t\t\tconfirmed: true \n\t\t};\n\t\tif (data) {\n\t\t\tconst list = Object.keys(data);\n\t\t\tlist.map((key) => {\n\t\t\t\tinfo[key] = data[key];\n\t\t\t})\n\t\t}\n\t\tthis.popedOut(id, info);\n\t}\n\tcancel(id, data: {}) {\n\t\tconst info = { \n\t\t\tid: id, \n\t\t\tconfirmed: true \n\t\t};\n\t\tif (data) {\n\t\t\tconst list = Object.keys(data);\n\t\t\tlist.map((key) => {\n\t\t\t\tinfo[key] = data[key];\n\t\t\t})\n\t\t}\n\t\tthis.popedOut(id, { id: id, confirmed: false });\n\t}\n\n}","import { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { PopupLiteComponent } from './components/popup-lite.component';\r\nimport { PopupLiteService } from './injectables/popup-lite.service';\r\nimport { DragDropModule } from 'drag-enabled';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    DragDropModule\r\n  ],\r\n  declarations: [\r\n    PopupLiteComponent\r\n  ],\r\n  exports: [\r\n    PopupLiteComponent\r\n  ],\r\n  entryComponents: [\r\n    PopupLiteComponent\r\n  ],\r\n  providers: [\r\n    PopupLiteService\r\n  ],\r\n  schemas: [CUSTOM_ELEMENTS_SCHEMA]\r\n})\r\n\r\nexport class PopupLiteModule {}\r\n"]}