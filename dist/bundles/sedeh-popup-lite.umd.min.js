!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs"),require("@angular/common"),require("@sedeh/drag-enabled")):"function"==typeof define&&define.amd?define("@sedeh/popup-lite",["exports","@angular/core","rxjs","@angular/common","@sedeh/drag-enabled"],t):t((e.sedeh=e.sedeh||{},e.sedeh["popup-lite"]={}),e.ng.core,e.rxjs,e.ng.common,e["drag-enabled"])}(this,function(e,t,a,i,o){"use strict";var n=function(){function e(e,t,i){this.componentFactoryResolver=t,this.renderer=i,this.extraclasses="",this.config={id:"",close:!1,overlay:!1,closeOnOverlay:!1,minimize:!1,maximize:!1,dragable:!1,resizable:!1,centered:!1,fixed:!1,pinable:!1,height:"",width:"",maxBodyHeight:"",minBodyHeight:"",minWidth:"",maxWidth:"",adjustHeight:!1,isOpen:!1,isOpening:!1,minimized:!1,maximized:!1,pinned:!1,zIndex:100,top:""},this.el=e.nativeElement}return e.prototype.onResize=function(e){if(this.config.centered&&!this.config.pinned){var t=this.el.querySelector(".popup-lite"),i=this.el.parentElement;this.renderer.setElementStyle(t,"left",(i.getBoundingClientRect().width-t.getBoundingClientRect().width)/2+"px")}},e.prototype.calcMaxHeight=function(e,t){for(var i=e.childNodes,o=0,n=0;n<i.length;n++)if(i[n].nodeName.toLowerCase()===t){i=i[n].childNodes;for(var r=0;r<i.length;r++)1===i[r].nodeType&&(o+=i[r].clientHeight+i[r].offsetHeight);break}return o},e.prototype.init=function(e,t,i,o){var n=this,r=this.componentFactoryResolver.resolveComponentFactory(e),s=this.content.createComponent(r).instance;(s.data=t,s.id=i.id,s.popupTitle?i.popupTitle=s.popupTitle.bind(s):i.popupTitle=function(e){return e},i)&&Object.keys(i).map(function(e){n.config[e]=i[e]});this.selector=o,this.display(i)},e.prototype.display=function(e){return this.config.maxBodyHeight=e&&e.maxHeight?e.maxHeight:"",this.config.minWidth=e&&e.minWidth?e.minWidth:"",this.config.maxWidth=e&&e.maxWidth?e.maxWidth:"",this.config.top=e&&e.top?e.top:"",this.config.isOpening=!0,this.config.adjustHeight=!(!e||!e.adjustHeight)&&e.adjustHeight,this.extraclasses=this.config.header?"":"header-off ",this.extraclasses+=this.config.footer?"":"footer-off ",setTimeout(function(){this.onResize(null),this.config.isOpen=!0}.bind(this),10),!1},e.prototype.keyUp=function(e){e.preventDefault(),13===e.which&&e.target.click()},e.prototype.closeOverlay=function(){this.config.closeOnOverlay&&this.closeModal(null,{id:this.config.id,confirmed:!1})},e.prototype.onClose=function(e){this.closeModal(e,{id:this.config.id,confirmed:!1})},e.prototype.closeModal=function(e,t){return this.config.isOpening=!1,this.config.overlay=!1,this.config.isOpen=!1,this.selector.popedOut(this.config.id,t),!1},e.prototype.minimizeModal=function(e){if(this.config.minimized=!this.config.minimized,this.config.resizable){var t=this.el.querySelector(".resize-corner"),i=this.el.querySelector(".popup-lite"),o=this.el.querySelector(".modal-body");this.config.minimized?(o.style.height="0",i.style.height="inherit"):(o.style.height=o.getAttribute("oh"),o.style.maxHeight="inherit"),t.style.display=this.config.minimized||this.config.maximized?"none":"block"}return!1},e.prototype.maximizeModal=function(e){if(this.config.maximized=!this.config.maximized,this.config.resizable){var t=this.el.querySelector(".resize-corner"),i=this.el.querySelector(".modal-body");i.getAttribute("oh")&&(i.style.height=i.getAttribute("oh")),t.style.display=this.config.minimized||this.config.maximized?"none":"block"}return!1},e.prototype.selected=function(e){return this.selector.setSelected(this.config.id),!0},e.prototype.pinModal=function(e){return this.config.pinned=!this.config.pinned,!1},e.prototype.dragEnabled=function(e){return this.config.dragable&&!this.config.pinned},e.prototype.onDragStart=function(e){},e.prototype.onDrag=function(e){e.node===this.dragHeader.element.nativeElement&&(this.renderer.setElementStyle(e.medium,"left",e.clientX-e.offset.x+"px"),this.renderer.setElementStyle(e.medium,"top",e.clientY-e.offset.y+"px"))},e.prototype.onDragEnd=function(e){e.node===this.dragHeader.element.nativeElement&&(this.renderer.setElementStyle(e.medium,"left",e.clientX-e.offset.x+"px"),this.renderer.setElementStyle(e.medium,"top",e.clientY-e.offset.y+"px"))},e.prototype.resizeEnabled=function(e){return this.config.resizable},e.prototype.onResizeStart=function(e){},e.prototype.onResizeProgress=function(e){if(e.node===this.resizer.element.nativeElement){var t=e.medium.getBoundingClientRect(),i=e.clientX-e.offset.x-t.left,o=e.clientY-e.offset.y-t.top,n=this.el.querySelector(".modal-header"),r=this.el.querySelector(".modal-footer"),s=this.el.querySelector(".modal-body"),a=r.getBoundingClientRect().height,d=o-n.getBoundingClientRect().height-a-2;200<i&&60<o&&(this.renderer.setElementStyle(e.medium,"width",i+"px"),this.renderer.setElementStyle(e.medium,"height",o+"px"),this.renderer.setElementStyle(s,"height",d+"px"))}},e.prototype.onResizeEnd=function(e){if(e.node===this.resizer.element.nativeElement){var t=e.medium.getBoundingClientRect(),i=e.clientX-e.offset.x-t.left,o=e.clientY-e.offset.y-t.top;if(200<i&&60<o){var n=this.el.querySelector(".modal-header"),r=this.el.querySelector(".modal-footer"),s=this.el.querySelector(".modal-body"),a=r.getBoundingClientRect().height,d=o-n.getBoundingClientRect().height-a-2;this.renderer.setElementStyle(e.medium,"width",i+"px"),this.renderer.setElementStyle(e.medium,"height",o+"px"),this.renderer.setElementStyle(s,"height",d+"px")}}},e.decorators=[{type:t.Component,args:[{selector:"popup-lite",template:'<div class="popup-lite-overlay" #overlay\n\t(click)="closeOverlay()"\n\t[style.display]="config.overlay ? \'block\' : \'none\'"></div>\n<div #modalWondow \n\tclass="popup-lite" \n\ttabindex="0"\n\t[style.minWidth]="config.minWidth"\n\t[style.maxWidth]="config.maxWidth"\n\t[style.display]="config.isOpening ? \'block\' : \'none\'" \n\t[style.position]="config.fixed ? \'fixed\':\'absolute\'"\n\t[style.top]="config.top.length ? config.top : \'\'"\n\t[style.height]="config.height"\n\t[style.zIndex]="config.zIndex"\n\t[class.fade-in]="config.isOpen" \n\t[class.maximized]="config.maximized"\n\t[class.pinned]="config.pinned"\n\t[style.z-index]="config.selected ? 105 : 100"\n\t(keyup)="keyUp($event)"\n\t(focus)="selected($event)"\n\t(click)="selected($event)">\n\t\t<div class="controls">\n\t\t\t<a *ngIf="config.pinable"\n\t\t\t\tclass="pin" tabindex="0" \n\t\t\t\t(click)="pinModal($event)">\n\t\t\t\t<span *ngIf="!config.pinned" class="fa fw fa-unlock" aria-hidden="true"></span>\n\t\t\t\t<span *ngIf="config.pinned" class="fa fw fa-lock" aria-hidden="true"></span>\n\t\t\t\t<span class="off-screen">Pin</span>\n\t\t\t</a><a *ngIf="config.minimize"\n\t\t\t\tclass="minify" tabindex="0" \n\t\t\t\t(click)="minimizeModal($event)" \n\t\t\t\t[class.clicked]="config.minimized">\n\t\t\t\t<span class="fa fw fa-window-minimize" aria-hidden="true"></span>\n\t\t\t\t<span class="off-screen">Minimize</span>\n\t\t\t</a><a *ngIf="config.maximize"\n\t\t\t\tclass="maxify" tabindex="0" \n\t\t\t\t(click)="maximizeModal($event)" \n\t\t\t\t[class.clicked]="config.maximized">\n\t\t\t\t<span class="fa fw fa-window-maximize" aria-hidden="true"></span>\n\t\t\t\t<span class="off-screen">Maximize</span>\n\t\t\t</a><a *ngIf="config.close"\n\t\t\t\tclass="close" tabindex="0" \n\t\t\t\t(click)="onClose($event)">\n\t\t\t\t<span class="fa fw fa-window-close" aria-hidden="true"></span>\n\t\t\t\t<span class="off-screen">Close</span>\n\t\t\t</a>\n\t\t</div>\n\t\t<a *ngIf="config.resizable"\n\t\t\t#resizer\n\t\t\tclass="resize-corner" \n\t\t\ttabindex="0" \n\t\t\t[medium]="modalWondow"\n\t\t\t[dragInDocument]="resizeEnabled.bind(this)"\n\t\t\t(onDragStart)="onResizeStart($event)"\n\t\t\t(onDrag)="onResizeProgress($event)"\n\t\t\t(onDragEnd)="onResizeEnd($event)">\n\t\t\t<span class="fa fw fa-ellipsis-h" aria-hidden="true"></span>\n\t\t\t<span class="off-screen">Resize</span>\n\t\t</a>\n\t\t<div *ngIf="config.header"\n\t\t\t#dragHeader\n\t\t\tclass="modal-header" \n\t\t\t[id]="config.id"\n\t\t\t[style.cursor]="(config.dragable && !config.pinned) ? \'all-scroll\':\'default\'"\n\t\t\t[class.pinned]="config.pinned"\n\t\t\t[class.minified]="config.minimized"\n\t\t\t[medium]="modalWondow"\n\t\t\t[dragInDocument]="dragEnabled.bind(this)"\n\t\t\t(onDragStart)="onDragStart($event)"\n\t\t\t(onDrag)="onDrag($event)"\n\t\t\t(onDragEnd)="onDragEnd($event)"\n\t\t\t(dblclick)="maximizeModal($event)">\n\t\t\t<span *ngIf="config.headerIcon" [class]="\'icon \' + config.headerIcon"></span>\n\t\t\t<span *ngIf="config.idOnHeader" class="header-title" [class.padded]="config.headerIcon ? true:null" [textContent]="config.popupTitle(config.id)"></span>\n\t\t</div>\n\t\t  <div class="modal-body"\n\t\t     [class.minimized]="config.minimized"\n\t\t     [style.minHeight]="config.minBodyHeight"\n\t\t\t [style.maxHeight]="config.maxBodyHeight">\n\t\t\t <ng-template  #content></ng-template>\n\t\t  </div>\n\t      <div class="modal-footer" *ngIf="config.footer"\n\t\t  \t\t[class.minimized]="config.minimized">\n\t         <ng-content select="[modal-footer]"></ng-content>\n\t\t  </div>\n\t    </div>',styles:[":host .centered{text-align:center;margin:0 auto}:host .popup-lite h2{font-size:.8em;margin:0}:host .popup-lite-overlay{position:absolute;background-color:rgba(44,44,44,.44);width:100%;height:100%;top:0;left:0;z-index:104}:host .popup-lite{box-sizing:border-box;position:absolute;top:100px;left:100px;border-radius:6px;padding:0;z-index:100;background-color:transparent;min-width:300px;-ms-box-shadow:0 3px 9px rgba(0,0,0,.5);-o-box-shadow:0 3px 9px rgba(0,0,0,.5);box-shadow:0 3px 9px rgba(0,0,0,.5);opacity:0;transition:opacity .25s ease-in-out}:host .popup-lite .off-screen{display:block;float:left;height:0;overflow:hidden;text-indent:-99999px;width:0}:host .popup-lite.fade-in{opacity:1;transition:opacity .25s ease-in-out}:host .popup-lite .controls{position:absolute;top:0;right:2px;border:1px solid #eee;background-color:#fff;border-radius:2px;border-top:0;z-index:2}:host .popup-lite .controls a{text-align:center;border:1px solid #999;box-sizing:border-box;border-radius:0 0 2px 2px;border-top:0;display:inline-block;width:21px;height:21px}:host .popup-lite .controls a span{display:inline-block}:host .popup-lite .controls a.close{cursor:pointer}:host .popup-lite .controls a.close:hover{color:red}:host .popup-lite .controls a.minify{cursor:pointer}:host .popup-lite .controls a.minify.clicked,:host .popup-lite .controls a.minify:hover{color:red}:host .popup-lite .controls a.pin{cursor:pointer}:host .popup-lite .controls a.pin.clicked,:host .popup-lite .controls a.pin:hover{color:red}:host .popup-lite .controls a.maxify{cursor:pointer}:host .popup-lite .controls a.maxify.clicked,:host .popup-lite .controls a.maxify:hover{color:red}:host .popup-lite a{text-align:center;border:1px solid #999;box-sizing:border-box;border-radius:2px}:host .popup-lite a.resize-corner{position:absolute;height:5px;bottom:12px;right:4px;width:13px;border:0;cursor:se-resize}:host .popup-lite a.resize-corner:hover{color:red}:host .popup-lite .modal-header{background-color:#fff;box-sizing:border-box;border-radius:2px 2px 0 0;min-width:100%;min-height:24px;padding:5px 10px}:host .popup-lite .modal-header .icon{position:absolute;left:5px;top:3px}:host .popup-lite .modal-header .header-title{position:absolute;top:0;left:0;padding:2px 5px;box-sizing:border-box;font-size:.9rem}:host .popup-lite .modal-header .header-title.padded{left:15px}:host .popup-lite .modal-body{background-color:#fff;box-sizing:border-box;padding:10px;overflow-y:auto}:host .popup-lite .modal-footer{background-color:#fff;box-sizing:border-box;border-radius:0 0 2px 2px;min-width:100%;min-height:20px;padding:5px 10px}:host .popup-lite .modal-footer .right{text-align:right}:host .header-off{border-top-left-radius:2px;border-top-right-radius:5px}:host .footer-off{border-bottom-right-radius:5px;border-bottom-left-radius:2px}:host .minimized{padding-top:0!important;padding-bottom:0!important;min-height:0!important}:host .maximized{top:0!important;left:0!important;min-width:100%!important;min-height:100%!important}:host .maximized .modal-footer,:host .maximized .modal-header{width:100%}:host .maximized .modal-body{min-width:100%;min-height:95vh}:host .minimized{min-height:0!important;height:0!important}:host .minified{border-radius:6px!important}:host .popup-lite.maximized{height:inherit!important;min-height:inherit!important}:host .pinned{border:1px dotted red}:host .block-key-events{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none}"]}]}],e.ctorParameters=function(){return[{type:t.ElementRef},{type:t.ComponentFactoryResolver},{type:t.Renderer}]},e.propDecorators={content:[{type:t.ViewChild,args:["content",{read:t.ViewContainerRef}]}],modalWondow:[{type:t.ViewChild,args:["modalWondow",{read:t.ViewContainerRef}]}],resizer:[{type:t.ViewChild,args:["resizer",{read:t.ViewContainerRef}]}],dragHeader:[{type:t.ViewChild,args:["dragHeader",{read:t.ViewContainerRef}]}],onResize:[{type:t.HostListener,args:["window:resize",["$event"]]}]},e}(),r=function(){function e(e,t,i){this.componentFactoryResolver=e,this.appRef=t,this.injector=i,this.componentRef={},this.status=[]}return e.prototype.createPopupLiteComponent=function(){var e=this.componentFactoryResolver.resolveComponentFactory(n).create(this.injector);return this.appRef.attachView(e.hostView),this.domElem=e.hostView.rootNodes[0],document.body.appendChild(this.domElem),e},e.prototype.popedOut=function(e,t){var i=this.componentRef[e];this.appRef.detachView(i.hostView),i.destroy(),delete this.componentRef[e],this.status[e].next(t),delete this.status[e]},e.prototype.setSelected=function(e){var t=this;Object.keys(this.componentRef).map(function(e){t.componentRef[e].instance.config.selected=!1}),this.componentRef[e].instance.config.selected=!0},e.prototype.openWindow=function(e,t,i,o){var n=this.createPopupLiteComponent(),r=n.instance,s={close:!0,minimize:!0,maximize:!0,resizable:!0,header:!0,footer:!0,dragable:!0,pinable:!0,idOnHeader:!0,centered:!0};o&&Object.keys(o).map(function(e){s[e]=o[e]});return s.id=t||""+(new Date).getTime(),this.componentRef[s.id]=n,this.status[s.id]=new a.Subject,r.init(e,i,s,this),this.setSelected(s.id),this.status[s.id]},e.prototype.openModal=function(e,t,i,o){var n=this.createPopupLiteComponent(),r=n.instance,s={overlay:!0,close:!0,closeOnOverlay:!0,header:!0,footer:!0,centered:!0};o&&Object.keys(o).map(function(e){s[e]=o[e]});return s.id=t||""+(new Date).getTime(),this.componentRef[s.id]=n,this.status[s.id]=new a.Subject,r.init(e,i,s,this),this.setSelected(s.id),this.status[s.id]},e.prototype.openDialog=function(e,t,i,o){var n=this.createPopupLiteComponent(),r=n.instance,s={overlay:!0,close:!0,closeOnOverlay:!0,header:!0,footer:!0,centered:!0};o&&Object.keys(o).map(function(e){s[e]=o[e]});return s.id=t||""+(new Date).getTime(),this.componentRef[s.id]=n,this.status[s.id]=new a.Subject,r.init(e,i,s,this),this.setSelected(s.id),this.status[s.id]},e.prototype.confirm=function(e,t){var i={id:e,confirmed:!0};t&&Object.keys(t).map(function(e){i[e]=t[e]});this.popedOut(e,i)},e.prototype.cancel=function(e,t){var i={id:e,confirmed:!0};t&&Object.keys(t).map(function(e){i[e]=t[e]});this.popedOut(e,{id:e,confirmed:!1})},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:t.ComponentFactoryResolver},{type:t.ApplicationRef},{type:t.Injector}]},e}(),s=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[i.CommonModule,o.DragDropModule],declarations:[n],exports:[n],entryComponents:[n],providers:[r],schemas:[t.CUSTOM_ELEMENTS_SCHEMA]}]}],e}();e.PopupLiteComponent=n,e.PopupLiteService=r,e.PopupLiteModule=s,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=sedeh-popup-lite.umd.min.js.map